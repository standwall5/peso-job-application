"use client";

import React, { useEffect, useState } from "react";
import styles from "@/app/admin/components/Dashboard.module.css";
import { getDashboardOverviewAction } from "@/app/admin/actions/dashboard.actions";
import OneEightyRing from "@/components/OneEightyRing";

interface DashboardOverview {
  totalJobseekers: number;
  totalApplications: number;
  totalCompanies: number;
  totalJobsListed: number;
}

const DashboardStats = () => {
  const [stats, setStats] = useState<DashboardOverview | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchStats = async () => {
      try {
        const data = await getDashboardOverviewAction();
        setStats(data);
      } catch (error) {
        console.error("Error fetching dashboard stats:", error);
      } finally {
        setLoading(false);
      }
    };

    fetchStats();
  }, []);

  if (loading) {
    return (
      <div className={styles.dashboardStats}>
        <OneEightyRing height={48} width={48} color="var(--accent)" />
      </div>
    );
  }

  return (
    <div className={styles.dashboardStats}>
      <h1>
        Dashboard <br />
        Overview
      </h1>
      <div className={styles.dashboardStatsCount}>
        <ul>
          <li>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="76"
              height="76"
              viewBox="0 0 40 38"
              fill="none"
            >
              <path
                d="M4.25 29.75L11.612 22.388M11.612 22.388C9.68924 20.4653 8.5 17.809 8.5 14.875C8.5 9.00697 13.257 4.25 19.125 4.25C24.993 4.25 29.75 9.00697 29.75 14.875C29.75 20.743 24.993 25.5 19.125 25.5C16.191 25.5 13.5347 24.3108 11.612 22.388Z"
                stroke="currentColor"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M37.25 31.9336C37.2499 33.7439 35.9422 35.3487 34.082 35.5957C31.7644 35.9034 29.4004 36.0625 27 36.0625C24.5996 36.0625 22.2356 35.9034 19.918 35.5957C18.0578 35.3487 16.7501 33.7439 16.75 31.9336V28.0596L17.4902 28.4658C17.7055 28.5839 17.9363 28.6853 18.1807 28.7666C20.9554 29.6891 23.9215 30.1875 27 30.1875C30.0785 30.1875 33.0446 29.6891 35.8193 28.7666C36.0637 28.6853 36.2945 28.5839 36.5098 28.4658L37.25 28.0596V31.9336ZM28.625 13.9375C30.6183 13.9375 32.2476 15.4928 32.3672 17.4561C33.2357 17.5429 34.0982 17.6493 34.9541 17.7773C36.7867 18.0515 38.0625 19.6434 38.0625 21.4316V24.7168C38.0625 26.2242 37.1482 27.6655 35.623 28.1729C32.9109 29.0745 30.0109 29.5625 27 29.5625C23.9891 29.5625 21.0891 29.0746 18.377 28.1729C16.8518 27.6655 15.9375 26.2242 15.9375 24.7168V21.4316L15.9521 21.0986C16.0989 19.4492 17.3278 18.0344 19.0459 17.7773C19.9014 17.6493 20.7637 17.5429 21.6318 17.4561C21.7514 15.4928 23.3817 13.9375 25.375 13.9375H28.625ZM27 25.5C26.8274 25.5 26.6875 25.6399 26.6875 25.8125C26.6875 25.9851 26.8274 26.125 27 26.125C27.1726 26.125 27.3125 25.9851 27.3125 25.8125C27.3125 25.6399 27.1726 25.5 27 25.5ZM25.375 16.5625C24.9077 16.5625 24.5069 16.8474 24.3369 17.2529C25.2192 17.2095 26.1071 17.1875 27 17.1875C27.8926 17.1875 28.7801 17.2095 29.6621 17.2529C29.492 16.8475 29.0921 16.5625 28.625 16.5625H25.375Z"
                fill="currentColor"
                stroke="white"
              />
            </svg>
            <div>
              <span>Jobseekers</span>
              <h2>{stats?.totalJobseekers || 0}</h2>
            </div>
          </li>
          <li>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="76"
              height="76"
              viewBox="0 0 46 46"
              fill="none"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M29.4998 28C29.4998 25.5147 31.5146 23.5 33.9998 23.5C36.4851 23.5 38.4998 25.5147 38.4998 28C38.4998 30.4853 36.4851 32.5 33.9998 32.5C31.5146 32.5 29.4998 30.4853 29.4998 28Z"
                fill="currentColor"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M25.7511 42.1053C25.8284 37.6156 29.4918 34 33.9998 34C38.508 34 42.1714 37.6157 42.2486 42.1056C42.2537 42.4034 42.0822 42.676 41.8115 42.8002C39.4326 43.8918 36.7864 44.5 34.0002 44.5C31.2137 44.5 28.5673 43.8917 26.1882 42.7999C25.9175 42.6757 25.746 42.4031 25.7511 42.1053Z"
                fill="currentColor"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M7.49984 10C7.49984 7.51472 9.51456 5.5 11.9998 5.5C14.4851 5.5 16.4998 7.51472 16.4998 10C16.4998 12.4853 14.4851 14.5 11.9998 14.5C9.51456 14.5 7.49984 12.4853 7.49984 10Z"
                fill="currentColor"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M3.75109 24.1053C3.82843 19.6156 7.49183 16 11.9998 16C16.508 16 20.1714 19.6157 20.2486 24.1056C20.2537 24.4034 20.0822 24.676 19.8115 24.8002C17.4326 25.8918 14.7864 26.5 12.0002 26.5C9.2137 26.5 6.56728 25.8917 4.18816 24.7999C3.91749 24.6757 3.74596 24.4031 3.75109 24.1053Z"
                fill="currentColor"
              />
              <path
                d="M12.8838 22.1162C12.3956 21.6281 11.6044 21.6281 11.1162 22.1162L5.11621 28.1162C4.62806 28.6044 4.62805 29.3956 5.11621 29.8838C5.60437 30.3719 6.39563 30.3719 6.88379 29.8838L10.75 26.0176V35L10.7598 35.373C10.9539 39.2037 14.1211 42.25 18 42.25C22.0041 42.25 25.25 39.0041 25.25 35V32C25.25 31.3096 24.6904 30.75 24 30.75C23.3096 30.75 22.75 31.3096 22.75 32V35C22.75 37.6234 20.6234 39.75 18 39.75C15.3766 39.75 13.25 37.6234 13.25 35V26.0176L17.1162 29.8838C17.6044 30.3719 18.3956 30.3719 18.8838 29.8838C19.3719 29.3956 19.3719 28.6044 18.8838 28.1162L12.8838 22.1162Z"
                fill="currentColor"
                stroke="white"
                strokeLinecap="round"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M24.0625 11C24.0625 6.06396 28.064 2.0625 33 2.0625C37.936 2.0625 41.9375 6.06396 41.9375 11C41.9375 15.936 37.936 19.9375 33 19.9375C28.064 19.9375 24.0625 15.936 24.0625 11ZM36.3094 9.3371C36.5301 9.02813 36.4586 8.59875 36.1496 8.37806C35.8406 8.15736 35.4113 8.22893 35.1906 8.5379L32.2248 12.69L30.7361 11.2014C30.4677 10.9329 30.0323 10.9329 29.7639 11.2014C29.4954 11.4698 29.4954 11.9052 29.7639 12.1736L31.8264 14.2361C31.9693 14.379 32.1678 14.4518 32.3692 14.4352C32.5706 14.4185 32.7545 14.3141 32.8719 14.1496L36.3094 9.3371Z"
                fill="currentColor"
              />
            </svg>
            <div>
              <span>Applications</span>
              <h2>{stats?.totalApplications || 0}</h2>
            </div>
          </li>
          <li>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="90"
              height="90"
              viewBox="0 0 35 24"
              fill="none"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M21 6.5C20.7239 6.5 20.5 6.72386 20.5 7C20.5 7.27614 20.7239 7.5 21 7.5V18.5H20.5C20.2239 18.5 20 18.7239 20 19C20 19.2761 20.2239 19.5 20.5 19.5H29V7.5C29.2761 7.5 29.5 7.27614 29.5 7C29.5 6.72386 29.2761 6.5 29 6.5H21ZM23.5 18V16.5C23.5 16.2239 23.7239 16 24 16H26C26.2761 16 26.5 16.2239 26.5 16.5V18C26.5 18.2761 26.2761 18.5 26 18.5H24C23.7239 18.5 23.5 18.2761 23.5 18ZM23 9.5C23 9.22386 23.2239 9 23.5 9H24C24.2761 9 24.5 9.22386 24.5 9.5C24.5 9.77614 24.2761 10 24 10H23.5C23.2239 10 23 9.77614 23 9.5ZM23.5 11C23.2239 11 23 11.2239 23 11.5C23 11.7761 23.2239 12 23.5 12H24C24.2761 12 24.5 11.7761 24.5 11.5C24.5 11.2239 24.2761 11 24 11H23.5ZM23 13.5C23 13.2239 23.2239 13 23.5 13H24C24.2761 13 24.5 13.2239 24.5 13.5C24.5 13.7761 24.2761 14 24 14H23.5C23.2239 14 23 13.7761 23 13.5ZM26 9C25.7239 9 25.5 9.22386 25.5 9.5C25.5 9.77614 25.7239 10 26 10H26.5C26.7761 10 27 9.77614 27 9.5C27 9.22386 26.7761 9 26.5 9H26ZM25.5 11.5C25.5 11.2239 25.7239 11 26 11H26.5C26.7761 11 27 11.2239 27 11.5C27 11.7761 26.7761 12 26.5 12H26C25.7239 12 25.5 11.7761 25.5 11.5ZM26 13C25.7239 13 25.5 13.2239 25.5 13.5C25.5 13.7761 25.7239 14 26 14H26.5C26.7761 14 27 13.7761 27 13.5C27 13.2239 26.7761 13 26.5 13H26Z"
                fill="currentColor"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M30 9.5V19.5H33.5C33.7761 19.5 34 19.2761 34 19C34 18.7239 33.7761 18.5 33.5 18.5H33V10.5C33.2761 10.5 33.5 10.2761 33.5 10C33.5 9.72386 33.2761 9.5 33 9.5H30ZM31 12.5C31 12.2239 31.2239 12 31.5 12H31.505C31.7811 12 32.005 12.2239 32.005 12.5V12.505C32.005 12.7811 31.7811 13.005 31.505 13.005H31.5C31.2239 13.005 31 12.7811 31 12.505V12.5ZM31.5 14C31.2239 14 31 14.2239 31 14.5V14.505C31 14.7811 31.2239 15.005 31.5 15.005H31.505C31.7811 15.005 32.005 14.7811 32.005 14.505V14.5C32.005 14.2239 31.7811 14 31.505 14H31.5ZM31 16.5C31 16.2239 31.2239 16 31.5 16H31.505C31.7811 16 32.005 16.2239 32.005 16.5V16.505C32.005 16.7811 31.7811 17.005 31.505 17.005H31.5C31.2239 17.005 31 16.7811 31 16.505V16.5Z"
                fill="currentColor"
              />
              <path
                d="M8.625 11.5C12.8362 11.5 16.25 14.9138 16.25 19.125V19.1279L16.249 19.2549C16.2418 19.6857 16.0127 20.0834 15.6436 20.3057C13.5927 21.5403 11.1898 22.25 8.625 22.25C6.0602 22.25 3.65726 21.5403 1.60645 20.3057C1.23728 20.0834 1.00822 19.6857 1.00098 19.2549C1.00025 19.2117 1 19.1684 1 19.125C1 14.9138 4.41383 11.5 8.625 11.5ZM17.625 13C20.5935 13.0001 23 15.4065 23 18.375C23 18.4501 22.9982 18.5252 22.9951 18.5996C22.9761 19.0574 22.7082 19.4681 22.2969 19.6699C20.8855 20.3618 19.2986 20.75 17.625 20.75C17.4107 20.75 17.1976 20.744 16.9863 20.7314C16.8191 20.7215 16.6672 20.6283 16.583 20.4834C16.4988 20.3384 16.493 20.16 16.5674 20.0098C16.6805 19.781 16.7446 19.527 16.749 19.2637C16.7498 19.2187 16.75 19.1732 16.75 19.1279V19.125C16.75 17.3028 16.1501 15.6216 15.1377 14.2666C15.0483 14.1466 15.0178 13.9929 15.0537 13.8477C15.0898 13.7022 15.1888 13.5799 15.3242 13.5156C16.0222 13.1847 16.8029 13 17.625 13ZM17.625 4.75C19.7651 4.75 21.5 6.4849 21.5 8.625C21.5 10.7651 19.7651 12.5 17.625 12.5C15.4849 12.5 13.75 10.7651 13.75 8.625C13.75 6.4849 15.4849 4.75 17.625 4.75ZM8.625 1.75C11.1793 1.75 13.25 3.82068 13.25 6.375C13.25 8.92932 11.1793 11 8.625 11C6.07068 11 4 8.92932 4 6.375C4 3.82068 6.07068 1.75 8.625 1.75Z"
                fill="currentColor"
                stroke="white"
                strokeLinejoin="round"
              />
            </svg>
            <div>
              <span>Companies</span>
              <h2>{stats?.totalCompanies || 0}</h2>
            </div>
          </li>
          <li>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="64"
              height="64"
              viewBox="0 0 18 21"
              fill="none"
            >
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M4.50183 4.5H8.24766L8.25 4.5H11.6299C13.4915 4.50268 14.9999 6.01269 14.9999 7.875V17.25C16.6567 17.25 17.9999 15.9068 17.9999 14.25V4.60821C17.9999 3.10282 16.8751 1.7966 15.3358 1.66884C15.1121 1.65027 14.8879 1.63321 14.6632 1.61767C14.1633 0.656475 13.1583 0 12 0H10.5C9.34168 0 8.33668 0.656467 7.83676 1.61765C7.61207 1.63319 7.38779 1.65026 7.16394 1.66884C5.66165 1.79353 4.55421 3.04069 4.50183 4.5ZM10.5 1.5C9.67157 1.5 9 2.17157 9 3H13.5C13.5 2.17157 12.8284 1.5 12 1.5H10.5Z"
                fill="currentColor"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M0 7.875C0 6.83947 0.839466 6 1.875 6H11.625C12.6605 6 13.5 6.83947 13.5 7.875V19.125C13.5 20.1605 12.6605 21 11.625 21H1.875C0.839466 21 0 20.1605 0 19.125V7.875ZM3 10.5C3 10.0858 3.33579 9.75 3.75 9.75H3.7575C4.17171 9.75 4.5075 10.0858 4.5075 10.5V10.5075C4.5075 10.9217 4.17171 11.2575 3.7575 11.2575H3.75C3.33579 11.2575 3 10.9217 3 10.5075V10.5ZM5.25 10.5C5.25 10.0858 5.58579 9.75 6 9.75H9.75C10.1642 9.75 10.5 10.0858 10.5 10.5C10.5 10.9142 10.1642 11.25 9.75 11.25H6C5.58579 11.25 5.25 10.9142 5.25 10.5ZM3 13.5C3 13.0858 3.33579 12.75 3.75 12.75H3.7575C4.17171 12.75 4.5075 13.0858 4.5075 13.5V13.5075C4.5075 13.9217 4.17171 14.2575 3.7575 14.2575H3.75C3.33579 14.2575 3 13.9217 3 13.5075V13.5ZM5.25 13.5C5.25 13.0858 5.58579 12.75 6 12.75H9.75C10.1642 12.75 10.5 13.0858 10.5 13.5C10.5 13.9142 10.1642 14.25 9.75 14.25H6C5.58579 14.25 5.25 13.9142 5.25 13.5ZM3 16.5C3 16.0858 3.33579 15.75 3.75 15.75H3.7575C4.17171 15.75 4.5075 16.0858 4.5075 16.5V16.5075C4.5075 16.9217 4.17171 17.2575 3.7575 17.2575H3.75C3.33579 17.2575 3 16.9217 3 16.5075V16.5ZM5.25 16.5C5.25 16.0858 5.58579 15.75 6 15.75H9.75C10.1642 15.75 10.5 16.0858 10.5 16.5C10.5 16.9142 10.1642 17.25 9.75 17.25H6C5.58579 17.25 5.25 16.9142 5.25 16.5Z"
                fill="currentColor"
              />
            </svg>
            <div>
              <span>Jobs listed</span>
              <h2>{stats?.totalJobsListed || 0}</h2>
            </div>
          </li>
        </ul>
      </div>
    </div>
  );
};

export default DashboardStats;
